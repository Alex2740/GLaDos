<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Movie</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../../src/foundation.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script>
        var movie = { "Title": "Frozen", "Year": "2013", "Rated": "PG", "Released": "27 Nov 2013", "Runtime": "102 min", "Genre": "Animation, Adventure, Comedy", "Director": "Chris Buck, Jennifer Lee", "Writer": "Jennifer Lee (screenplay by), Hans Christian Andersen (story inspired by \"The Snow Queen\" by), Chris Buck (story by), Jennifer Lee (story by), Shane Morris (story by)", "Actors": "Kristen Bell, Idina Menzel, Jonathan Groff, Josh Gad", "Plot": "When the newly-crowned Queen Elsa accidentally uses her power to turn things into ice to curse her home in infinite winter, her sister Anna teams up with a mountain man, his playful reindeer, and a snowman to change the weather condition.", "Language": "English, Norwegian", "Country": "USA", "Awards": "Won 2 Oscars. Another 77 wins & 57 nominations.", "Poster": "https://images-na.ssl-images-amazon.com/images/M/MV5BMTQ1MjQwMTE5OF5BMl5BanBnXkFtZTgwNjk3MTcyMDE@._V1_SX300.jpg", "Ratings": [{ "Source": "Internet Movie Database", "Value": "7.5/10" }, { "Source": "Rotten Tomatoes", "Value": "90%" }, { "Source": "Metacritic", "Value": "74/100" }], "Metascore": "74", "imdbRating": "7.5", "imdbVotes": "478,434", "imdbID": "tt2294629", "Type": "movie", "DVD": "18 Mar 2014", "BoxOffice": "$400,736,600", "Production": "Walt Disney Pictures", "Website": "http://www.disney.com/frozen", "Response": "True" };
        console.log(movie);
        
        var rating1 = '';
            var rating2 = '';
            var rating3 = '';
            var rating4 = '';
            var rating5 = '';

            var rating = Math.round(parseFloat(movie.imdbRating, 10) / 2);
            if (rating === 1) {
                rating1 = 'checked';
                rating2 = '';
                rating3 = '';
                rating4 = '';
                rating5 = '';
            } else if (rating === 0) {
                rating1 = '';
                rating2 = '';
                rating3 = '';
                rating4 = '';
                rating5 = '';
            } else if (rating === 2) {
                rating1 = 'checked';
                rating2 = 'checked';
                rating3 = '';
                rating4 = '';
                rating5 = '';
            } else if (rating === 3) {
                rating1 = 'checked';
                rating2 = 'checked';
                rating3 = 'checked';
                rating4 = '';
                rating5 = '';
            } else if (rating === 4) {
                rating1 = 'checked';
                rating2 = 'checked';
                rating3 = 'checked';
                rating4 = 'checked';
                rating5 = '';
            } else if (rating === 5) {
                rating1 = 'checked';
                rating2 = 'checked';
                rating3 = 'checked';
                rating4 = 'checked';
                rating5 = 'checked';
            }

            function setSizeMoviePoster() {
                var moviePoster = document.getElementById('moviePoster');
                var cell = moviePoster.parentElement;

                var width = cell.offsetWidth;
                var height = cell.parentElement.lastElementChild.firstElementChild.offsetHeight;

                var span = document.createElement('span');
                span.className = 'movie-poster-background';
                span.style.height = height + 'px';

                if (cell.children.length >= 3) {
                    var elementToRomve = cell.children[1];
                    elementToRomve.remove()
                }

                moviePoster.parentNode.insertBefore(span, moviePoster);
                moviePoster.style.height = height + 'px';
                moviePoster.style.width = width + 'px';
            }
            
            window.onload = setSizeMoviePoster;
            window.onresize = setSizeMoviePoster;

    </script>
</head>
<body>
    <div class="grid-container">
        <div class="grid-x">
            <div class="cell small-3"></div>
            <div class="cell small-6">
                <div class="card animated zoomIn">
                    <div class="grid-x">
                        <div class="cell small-6">
                            <script>document.write('<a id="moviePoster" class="movie-poster" href="https://imdb.com/title/' + movie.imdbID + '"><img src="poster.jpg" alt="Poster" /></a >')</script>
                        </div>
                        <div class="cell small-6">
                            <div class="grid-y grid-padding-x">
                                <div class="cell">
                                    <h5 class="movie-year"><script>document.write(movie.Year)</script></h5>
                                </div>
                                <div class="cell">
                                    <h3 class="movie-title"><script>document.write(movie.Title)</script></h3>
                                </div>
                                <div class="cell">
                                    <div class="grid-x">
                                        <div class="cell auto">
                                            <span class="movie-genre"><script>document.write(movie.Genre)</script></span>
                                        </div>
                                        <div class="cell  shrink">
                                            <span class="movie-runtime"><script>document.write(movie.Runtime)</script></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="cell">
                                    <script>document.write('<span class="fa fa-star ' + rating1 + '"></span>')</script>
                                    <script>document.write('<span class="fa fa-star ' + rating2 + '"></span>')</script>
                                    <script>document.write('<span class="fa fa-star ' + rating3 + '"></span>')</script>
                                    <script>document.write('<span class="fa fa-star ' + rating4 + '"></span>')</script>
                                    <script>document.write('<span class="fa fa-star ' + rating5 + '"></span>')</script>
                                    <script>document.write(parseFloat(movie.imdbRating, 10) / 2)</script>/5
                                </div>
                                <div class="cell">
                                    <p><script>document.write(movie.Plot)</script></p>
                                </div>
                                <div class="cell">
                                    <span><b>Stars :</b> <script>document.write(movie.Actors)</script></span>
                                </div>
                            </div>   
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>
</html>